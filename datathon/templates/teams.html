{% extends 'base.html' %}

{% block content %}
{% if user.is_authenticated %}
<div class="table-responsive mx-auto col-11">
	<table class="table table-bordered table-hover ">
	  <thead>
	    <tr>
	      <th scope="col"></th>
	      <th scope="col"></th>
	      {% for dataset in datasets %}
	      <th scope="col">
	      	<a href="{% url 'team-dataset' dataset.id teams.0.id %}">{{dataset}}</a>
	      </th>
	      {% endfor %}
	      <th scope="col"></th>
	    </tr>
	  </thead>
	  <tbody>
	  	{% for team in teams %}{% for team_points in points_per_dataset %}
	  	{% if forloop.counter == forloop.parentloop.counter %}
	    <tr>
	      <th scope="row">{{forloop.counter}}</th>
	      <td>{{team.name}}</td>
	      {% for points in team_points %}
	      	<td>{{points}}</td>
	      {% endfor %}
	      <td>{{team.get_points}}</td>
	    </tr>
	    {% endif %}
	    {% endfor %}{% endfor %}
	  </tbody>
	</table>
	<a class="btn btn-outline-success col-lg-4 col-xs-11 float-right" href="{% url 'deactivate-dashboard' %}">Deactivate</a>
</div>
{% else %}
<div class="table-responsive mx-auto col-11 leaderboard">
	<table class="table table-bordered border border-dark bg-grey table-hover ">
	  <thead>
	    <tr>
	      <th scope="col" class="border-dark"></th>
	      <th scope="col" class="border-dark"></th>
	      {% for dataset in datasets %}
	      <th scope="col" class="border-dark text-light">{{dataset}}</th>
	      {% endfor %}
	      <th scope="col" class="border-dark"></th>
	    </tr>
	  </thead>
	  <tbody>
	  	{% for team in teams %}{% for team_points in points_per_dataset %}
	  	{% if forloop.counter == forloop.parentloop.counter %}
	    <tr class="text-light">
	      <th scope="row" class="border-dark">{{forloop.counter}}</th>
	      <td class="border-dark">{{team.name}}</td>
	      {% for points in team_points %}
	      	<td class="text-black border-dark">{{points}}</td>
	      {% endfor %}
	      <td class="border-dark">{{team.get_points}}</td>
	    </tr>
	    {% endif %}
	    {% endfor %}{% endfor %}
	  </tbody>
	</table>
</div>
{% endif %}

{% endblock content %}
